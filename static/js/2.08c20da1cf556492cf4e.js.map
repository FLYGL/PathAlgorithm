{"version":3,"sources":["webpack:///src/components/Canvas.vue","webpack:///./src/components/Canvas.vue?940b","webpack:///./src/components/Canvas.vue"],"names":["Canvas","name","data","ww","wh","canvas","undefined","ctx","colors","mouse","x","y","particles","amount","radius","value","k","mounted","this","document","getElementsByTagName","getContext","width","height","initScene","AllRender","methods","Particle","Math","random","dest","r","vx","vy","accX","accY","friction","color","floor","SingleRender","particle","fillStyle","beginPath","arc","PI","fill","a","b","sqrt","ChangeMouse","e","clientX","clientY","window","innerWidth","innerHeight","clearRect","font","textAlign","fillText","getImageData","globalCompositeOperation","i","round","j","push","length","ChangeRadius","requestAnimationFrame","components_Canvas","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","on","mousemove","click","resize","_v","directives","rawName","expression","type","domProps","keyup","input","$event","target","composing","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/2.08c20da1cf556492cf4e.js","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <canvas id=\"scene\" @mousemove=\"ChangeMouse\" @click=\"ChangeRadius\" @resize=\"initScene\"></canvas>\n    <input id=\"copy\" type=\"text\" value=\"Hello Canvas\" v-model=\"value\" @keyup=\"initScene\"/>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'Canvas',\n    data(){\n      return {\n        ww:0,\n        wh:0,\n        canvas:undefined,\n        ctx:undefined,\n        colors:[\"#468966\",\"#FFF0A5\", \"#FFB03B\",\"#B64926\", \"#8E2800\"],\n        mouse:{\n          x:0,\n          y:0\n        },\n        particles:[],\n        amount:0,\n        radius:1,\n        value:'Hello World',\n        k:0,\n      }\n    },\n    mounted () {\n      //this.ctx=this.canvas.getContext('2d');\n      this.canvas=document.getElementsByTagName('canvas')[0];\n      this.ctx=document.getElementsByTagName('canvas')[0].getContext(\"2d\");\n      this.ww = this.canvas.width\n      this.wh = this.canvas.height\n      this.initScene();\n      this.AllRender();\n    },\n    methods:{\n      Particle(x,y){\n        var particleJson={\n          x :  Math.random()*this.ww,\n          y :  Math.random()*this.wh,\n          dest : {\n          x : x,\n          y : y\n          },\n          r : Math.random()*5 + 2,               //随机半径（颗粒大小）\n          vx : (Math.random()-0.5)*20,\n          vy : (Math.random()-0.5)*20,\n          accX : 0,\n          accY : 0,\n          friction : Math.random()*0.05 + 0.94,        //随机摩擦力（缓冲的动画效果）\n          color : this.colors[Math.floor(Math.random()*6)],   //随机颜色\n        }\n        return particleJson;\n      },\n      SingleRender(particle){\n        particle.accX = (particle.dest.x - particle.x)/1000;\n        particle.accY = (particle.dest.y - particle.y)/1000;\n        particle.vx += particle.accX;\n        particle.vy += particle.accY;\n        particle.vx *= particle.friction;\n        particle.vy *= particle.friction;\n\n        particle.x += particle.vx;\n        particle.y +=  particle.vy;\n\n        this.ctx.fillStyle = particle.color;\n        this.ctx.beginPath();\n        this.ctx.arc(particle.x, particle.y, particle.r, Math.PI * 2, false);\n        this.ctx.fill();\n\n        var a = particle.x - this.mouse.x;\n        var b = particle.y - this.mouse.y;\n\n        var distance = Math.sqrt( a*a + b*b );\n        if(distance<(this.radius*70)){\n          particle.accX = (particle.x - this.mouse.x)/100;\n          particle.accY = (particle.y - this.mouse.y)/100;\n          particle.vx += particle.accX;\n          particle.vy += particle.accY;\n        }\n        return particle\n      },\n      ChangeMouse(e){\n        this.mouse.x = e.clientX;\n        this.mouse.y = e.clientY;\n      },\n      initScene(){\n        this.ww = this.canvas.width=window.innerWidth\n        this.wh = this.canvas.height=window.innerHeight\n\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);   //清空 Canvas\n\n        this.ctx.font = \"bold \"+(this.ww/10)+\"px sans-serif\";\n        this.ctx.textAlign = \"center\";\n        this.ctx.fillText(this.value, this.ww/2, this.wh/2);               //将 Input 中输入的值，打印在 Canvas 上\n        var data  = this.ctx.getImageData(0, 0, this.ww, this.wh).data;    //获取图像数据\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);   //清空 Canvas\n        this.ctx.globalCompositeOperation = \"screen\";\n\n        this.particles = [];\n        for(var i=0;i<this.ww;i+=Math.round(this.ww/500)){\n          for(var j=0;j<this.wh;j+=Math.round(this.ww/150)){\n            if(data[ ((i + j*this.ww)*4) + 3] > 150){\n              this.particles.push(this.Particle(i,j));      //将图像数据经过 Particle 函数处理后 push 到 particles 数组中\n            }\n          }\n        }\n        this.amount = this.particles.length;                          //获得 particles 的长度\n      },\n      ChangeRadius(){\n        this.radius++;\n        if(this.radius === 5){\n          this.radius = 0;\n        }\n      },\n      AllRender() {\n        requestAnimationFrame(this.AllRender);\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);   //清空 Canvas\n        for (var i = 0; i < this.amount; i++) {\n         this. particles[i]=this.SingleRender(this.particles[i]);                          //循环 particles 数组渲染\n        }\n      },\n    },\n  }\n</script>\n\n<style scoped>\n  .wrapper{\n    margin:0;\n    overflow: hidden;\n    font-size:0;\n  }\n  canvas{\n    background: black;\n    width: 100vw;\n    height: 100vh;\n  }\n  input{\n    width: 250px;\n    height: 40px;\n    line-height: 40px;\n    position: absolute;\n    bottom: 35px;\n    left: calc(50% - 125px);\n    background: none;\n    color: white;\n    font-size: 30px;\n    font-family: arial;\n    text-align: center;\n    border: 1px solid white;\n    background: rgba(255,255,255,0.2);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Canvas.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('canvas',{attrs:{\"id\":\"scene\"},on:{\"mousemove\":_vm.ChangeMouse,\"click\":_vm.ChangeRadius,\"resize\":_vm.initScene}}),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.value),expression:\"value\"}],attrs:{\"id\":\"copy\",\"type\":\"text\",\"value\":\"Hello Canvas\"},domProps:{\"value\":(_vm.value)},on:{\"keyup\":_vm.initScene,\"input\":function($event){if($event.target.composing){ return; }_vm.value=$event.target.value}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a66da7a2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Canvas.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a66da7a2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Canvas.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Canvas.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Canvas.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a66da7a2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Canvas.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a66da7a2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Canvas.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}